version: 1.0.0
editors:
  - id: eclipse/che-theia/next
    title: Eclipse Theia development version.
    displayName: theia-ide
    description: Eclipse Theia, get the latest release each day.
    icon: https://raw.githubusercontent.com/theia-ide/theia/master/logo/theia-logo-no-text-black.svg?sanitize=true
    repository: https://github.com/eclipse/che-theia
    firstPublicationDate: "2020-03-17"
    endpoints:
      - name: "theia"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: ide
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
      - name: "webviews"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: webview
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
          unique: true
      - name: "mini-browser"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: mini-browser
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
          unique: true
      - name: "theia-dev"
        public: true
        targetPort: 3130
        attributes:
          protocol: http
          type: ide-dev
          discoverable: false
      - name: "theia-redirect-1"
        public: true
        targetPort: 13131
        attributes:
          protocol: http
          discoverable: false
      - name: "theia-redirect-2"
        public: true
        targetPort: 13132
        attributes:
          protocol: http
          discoverable: false
      - name: "theia-redirect-3"
        public: true
        targetPort: 13133
        attributes:
          protocol: http
          discoverable: false
    containers:
      - name: theia-ide
        image: "registry.redhat.io/codeready-workspaces/theia-rhel8:2.8"
        env:
          - name: THEIA_PLUGINS
            value: local-dir:///plugins
          - name: HOSTED_PLUGIN_HOSTNAME
            value: 0.0.0.0
          - name: HOSTED_PLUGIN_PORT
            value: "3130"
          - name: THEIA_HOST
            value: 127.0.0.1
        volumeMounts:
          - name: plugins
            path: "/plugins"
          - name: theia-local
            path: "/home/theia/.theia"
        mountSources: true
        ports:
          - exposedPort: 3100
          - exposedPort: 3130
          - exposedPort: 13131
          - exposedPort: 13132
          - exposedPort: 13133
        memoryLimit: "512M"
        cpuLimit: 1500m
        cpuRequest: 100m
    initContainers:
      - name: remote-runtime-injector
        image: "registry.redhat.io/codeready-workspaces/theia-endpoint-rhel8:2.8"
        volumeMounts:
          - name: remote-endpoint
            path: "/remote-endpoint"
            ephemeral: true
        env:
          - name: PLUGIN_REMOTE_ENDPOINT_EXECUTABLE
            value: /remote-endpoint/plugin-remote-endpoint
          - name: REMOTE_ENDPOINT_VOLUME_NAME
            value: remote-endpoint
  - id: eclipse/che-theia/7.26.2
    title: Eclipse Theia
    displayName: theia-ide
    description: Eclipse Theia
    icon: https://raw.githubusercontent.com/theia-ide/theia/master/logo/theia-logo-no-text-black.svg?sanitize=true
    repository: https://github.com/eclipse/che-theia
    firstPublicationDate: "2021-02-18"
    endpoints:
      - name: "theia"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: ide
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
      - name: "webviews"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: webview
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
          unique: true
      - name: "mini-browser"
        public: true
        targetPort: 3100
        attributes:
          protocol: http
          type: mini-browser
          secure: true
          cookiesAuthEnabled: true
          discoverable: false
          unique: true
      - name: "theia-dev"
        public: true
        targetPort: 3130
        attributes:
          protocol: http
          type: ide-dev
          discoverable: false
      - name: "theia-redirect-1"
        public: true
        targetPort: 13131
        attributes:
          protocol: http
          discoverable: false
      - name: "theia-redirect-2"
        public: true
        targetPort: 13132
        attributes:
          protocol: http
          discoverable: false
      - name: "theia-redirect-3"
        public: true
        targetPort: 13133
        attributes:
          protocol: http
          discoverable: false
    containers:
      - name: theia-ide
        image: "registry.redhat.io/codeready-workspaces/theia-rhel8:2.8"
        env:
          - name: THEIA_PLUGINS
            value: local-dir:///plugins
          - name: HOSTED_PLUGIN_HOSTNAME
            value: 0.0.0.0
          - name: HOSTED_PLUGIN_PORT
            value: "3130"
          - name: THEIA_HOST
            value: 127.0.0.1
        volumeMounts:
          - name: plugins
            path: "/plugins"
          - name: theia-local
            path: "/home/theia/.theia"
        mountSources: true
        ports:
          - exposedPort: 3100
          - exposedPort: 3130
          - exposedPort: 13131
          - exposedPort: 13132
          - exposedPort: 13133
        memoryLimit: "512M"
    initContainers:
      - name: remote-runtime-injector
        image: "registry.redhat.io/codeready-workspaces/theia-endpoint-rhel8:2.8"
        volumeMounts:
          - name: remote-endpoint
            path: "/remote-endpoint"
            ephemeral: true
        env:
          - name: PLUGIN_REMOTE_ENDPOINT_EXECUTABLE
            value: /remote-endpoint/plugin-remote-endpoint
          - name: REMOTE_ENDPOINT_VOLUME_NAME
            value: remote-endpoint

