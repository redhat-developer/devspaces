apiVersion: v2
publisher: eclipse
name: che-theia
version: 7.30.0
type: Che Editor
displayName: theia-ide
title: Eclipse Theia
description: Eclipse Theia
icon: /v3/images/eclipse-che-logo.png
category: Editor
repository: https://github.com/eclipse/che-theia
firstPublicationDate: "2021-04-27"
spec:
  endpoints:
   -  name: "theia"
      public: true
      targetPort: 3100
      attributes:
        protocol: http
        type: ide
        secure: true
        cookiesAuthEnabled: true
        discoverable: false
   -  name: "webviews"
      public: true
      targetPort: 3100
      attributes:
        protocol: http
        type: webview
        secure: true
        cookiesAuthEnabled: true
        discoverable: false
        unique: true
   -  name: "mini-browser"
      public: true
      targetPort: 3100
      attributes:
        protocol: http
        type: mini-browser
        secure: true
        cookiesAuthEnabled: true
        discoverable: false
        unique: true
   -  name: "theia-dev"
      public: true
      targetPort: 3130
      attributes:
        protocol: http
        type: ide-dev
        discoverable: false
   -  name: "theia-redirect-1"
      public: true
      targetPort: 13131
      attributes:
        protocol: http
        discoverable: false
   -  name: "theia-redirect-2"
      public: true
      targetPort: 13132
      attributes:
        protocol: http
        discoverable: false
   -  name: "theia-redirect-3"
      public: true
      targetPort: 13133
      attributes:
        protocol: http
        discoverable: false
   - name: terminal
     public: true
     targetPort: 3333
     attributes:
       protocol: ws
       type: collocated-terminal
       discoverable: false
       secure: true
       cookiesAuthEnabled: true
  containers:
  - name: theia-ide
    image: "registry.redhat.io/codeready-workspaces/theia-rhel8:2.9"
    env:
        - name: THEIA_PLUGINS
          value: local-dir:///plugins
        - name: HOSTED_PLUGIN_HOSTNAME
          value: 0.0.0.0
        - name: HOSTED_PLUGIN_PORT
          value: "3130"
        - name: THEIA_HOST
          value: 127.0.0.1
    volumes:
        - mountPath: "/plugins"
          name: plugins
    mountSources: true
    ports:
        - exposedPort: 3100
        - exposedPort: 3130
        - exposedPort: 13131
        - exposedPort: 13132
        - exposedPort: 13133
    memoryLimit: 512M
    cpuLimit: 1500m
    cpuRequest: 100m
  - name: che-machine-exec
    image: 'registry.redhat.io/codeready-workspaces/machineexec-rhel8:2.9'
    ports:
      - exposedPort: 3333
    command:
      - /go/bin/che-machine-exec
      - '--url'
      - '127.0.0.1:3333'
  initContainers:
  - name: remote-runtime-injector
    image: registry.redhat.io/codeready-workspaces/theia-endpoint-rhel8:2.9
    volumes:
      - mountPath: "/remote-endpoint"
        name: remote-endpoint
        ephemeral: true
    env:
      - name: PLUGIN_REMOTE_ENDPOINT_EXECUTABLE
        value: /remote-endpoint/plugin-remote-endpoint
      - name: REMOTE_ENDPOINT_VOLUME_NAME
        value: remote-endpoint
